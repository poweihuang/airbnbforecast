setwd("~/Document/airbnb")
setwd("~/Desktop")
test_user <- read.csv("test_users.csv")
setwd("~/Desktop/airbnb")
test_user <- read.csv("test_users.csv")
View(test_user)
train_user <- read.csv("train_users_2.csv")
View(train_user)
View(train_user)
table(train_user)
table(train_user$id)
summary(train_user$age)
test <- test_user
train <- train_user
test <- read.csv("test_users.csv")
train <- read.csv("train_users_2.csv")
rm(test_user)
rm(train_user)
plot(age)
plot(train$age)
age_counts <- table(train$age)
barplot(age_counts, main = "Age exploration", xlab = "age")
age_counts
train[train > 100] <- NA
barplot(age_counts, main = "Age exploration", xlab = "age")
age_counts <- table(train$age)
train[train < 18] <- NA
age_counts <- table(train$age)
barplot(age_counts, main = "Age exploration", xlab = "age")
summary(age_counts)
avg(age_counts)
arg(age_counts)
averagw(age_counts)
average(age_counts)
mean(age_counts)
summary(train$age)
download.file()
download.file('http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js',
destfile='www/js/jquery.min.js')
table(train_user$id)
summary(train$age)
plot(train$age)
age_counts <- table(train$age)
barplot(age_counts, main = "Age exploration", xlab = "age")
barplot(age_counts, main = "Age exploration", xlab = "age")
View(train)
summary(train$date_account_created)
create_count <- summary(train$date_account_created)
plot(create_count, main = "Date account created", xlab = "date")
create_count
install.packages(plotly)
install.packages("plotly")
library(plotly)
View(create_count)
library(plotly)
x <- c(1:100)
random_y <- rnorm(100, mean = 0)
data <- data.frame(x, random_y)
p <- plot_ly(data, x = ~x, y = ~random_y, type = 'scatter', mode = 'lines')
p
month <- c('January', 'February', 'March', 'April', 'May', 'June', 'July',
'August', 'September', 'October', 'November', 'December')
y <- create_count
data <- data.frame(month, y)
p <- plot_ly(data, x = ~month, y = ~y, type = 'scatter', mode = 'lines')
p
data$month <- factor(data$month, levels = data[["month"]])
p <- plot_ly(data, x = ~month, y = ~y, type = 'scatter', mode = 'lines')
p
month
data$month
data$month <- factor(data$month, levels = data[["month"]])
data
data <- data.frame(month, y)
data
create_count
View(create_count)
c(create_count)
create_count<- c(create_count)
create_count
View(create_count)
as.data.frame(y)
data <- data.frame(month, y$y)
data <- data.frame(month, y)
View(y)
y <- as.data.frame(create_count)
View(y)
data <- data.frame(month, y$create_count)
y
y[1]
y[1,]
y[,1]
y[,0]
setNames(cbind(rownames(y), y, row.names = NULL),
c("date", "create_count"))
data <- data.frame(y$date, y$create_count)
tail(1)
tail(data,1)
y
y <- as.data.frame(create_count)
setNames(cbind(rownames(y), y, row.names = NULL),
c("date", "create_count"))
y <- setNames(cbind(rownames(y), y, row.names = NULL),
c("date", "create_count"))
data <- data.frame(y$, y$create_count)
data <- data.frame(y$date, y$create_count)
data$date <- factor(data$date, levels = data[["date"]])
p <- plot_ly(data, x = ~date, y = ~y, type = 'scatter', mode = 'lines')
p
data
p <- plot_ly(data, x = ~y.date, y = ~y.create_count, type = 'scatter', mode = 'lines')
p
summary(train$date_account_created)
summary(train$date_account_created, maxsum = 99999999)
summary(train$date_account_created, maxsum = 213451)
create_count <- summary(train$date_account_created, maxsum = 213451)
y <- as.data.frame(create_count)
y <- setNames(cbind(rownames(y), y, row.names = NULL),
c("date", "create_count"))
data <- data.frame(y$date, y$create_count)
p <- plot_ly(data, x = ~y.date, y = ~y.create_count, type = 'scatter', mode = 'lines')
p
y_firstbook <- setName(cbind(rownames(y_firstbook), y_firstbook, row.name = NULL))
firstbook <- summary(train$date_first_booking, maxsum = 213451)
y_firstbook <- as.data.frame(firstbook)
y_firstbook <- setNames(cbind(rownames(y_firstbook), y_firstbook, row.name = NULL),
c("date", "first book count"))
firstbook_data <- data.frame(y_firstbook$date, y_firstbook$firstbook)
p2 <- plot_ly(firstbook_data, x = ~y_firstbook.date, y = ~y.firstbook, type = 'scatter', mode = 'lines')
y_firstbook
head(firstbook, 10)
y_firstbook <- setNames(cbind(rownames(y_firstbook), y_firstbook, row.name = NULL),
c("date", "first book count"))
View(firstbook)
View(y_firstbook)
firstbook
firstbook <- firstbook[-1,]
firstbook
y_firstbook <- y_firstbook[-1,]
y_firstbook <- setNames(cbind(rownames(y_firstbook), y_firstbook, row.name = NULL),
c("date", "first book count"))
firstbook_data <- data.frame(y_firstbook$date, y_firstbook$firstbook)
View(y_firstdata)
View(y_first)
View(y_firstbook)
firstbook <- summary(train$date_first_booking, maxsum = 213451)
y_firstbook <- as.data.frame(firstbook)
View(y_firstbook)
y_firstbook <- y_firstbook[-1,]
View(y_firstbook)
y_firstbook <- as.data.frame(y_firstbook[-1,])
y_firstbook <- data.frame(y_firstbook[-1,])
View(y_firstbook)
firstbook <- summary(train$date_first_booking, maxsum = 213451)
y_firstbook <- as.data.frame(firstbook)
View(y_firstbook)
tail(y_firstbook, 1976)
tail(y_firstbook, 1977)
y_firstbook <- tail(y_firstbook, 1976)
View(y_firstbook)
y_firstbook <- setNames(cbind(rownames(y_firstbook), y_firstbook, row.name = NULL),
c("date", "first book count"))
y_firstbook <- setNames(cbind(rownames(y_firstbook), y_firstbook, row.names = NULL),
c("date", "first book count"))
firstbook_data <- data.frame(y_firstbook$date, y_firstbook$firstbook)
View(y_firstbook)
y_firstbook <- setNames(cbind(rownames(y_firstbook), y_firstbook, row.names = NULL),
c("date", "first_book_count"))
firstbook_data <- data.frame(y_firstbook$date, y_firstbook$first_book_date)
View(y_firstbook)
firstbook <- summary(train$date_first_booking, maxsum = 213451)
y_firstbook <- as.data.frame(firstbook)
y_firstbook <- tail(y_firstbook, 1976)
y_firstbook <- setNames(cbind(rownames(y_firstbook), y_firstbook, row.names = NULL),
c("date", "first_book_count"))
firstbook_data <- data.frame(y_firstbook$date, y_firstbook$first_book_count)
p2 <- plot_ly(firstbook_data, x = ~y_firstbook.date, y = ~y.firstbook, type = 'scatter', mode = 'lines')
p2
View(firstbook_data)
p2 <- plot_ly(firstbook_data, x = ~y_firstbook.date, y = ~y_firstbook.first_book_count),
type = 'scatter', mode = 'lines')
p2 <- plot_ly(firstbook_data, x = ~y_firstbook.date, y = ~y_firstbook.first_book_count,
type = 'scatter', mode = 'lines')
p2
p4 <- hist(y_diff, main = "difference between account created and first booking",
xlab = "date difference", ylab = "counts")
diff <- table(datediff$diff)
datediff<-subset(train, select = c(date_first_booking, date_account_created) )
datediff$date_first_booking <- as.Date(datediff$date_first_booking, format = "%Y-%m-%d")
datediff$date_account_created <- as.Date(datediff$date_account_created)
datediff$diff <- difftime(datediff$date_first_booking,
datediff$date_account_created, units = "days")
diff <- table(datediff$diff)
y_diff <- as.data.frame(diff)
p3 <- plot(y_diff)
y_diff <- tail(y_diff, 366)
p4 <- hist(y_diff, main = "difference between account created and first booking",
xlab = "date difference", ylab = "counts")
p3 <- plot(y_diff)
View(y_diff)
p3
p2
p3 <- plot(y_diff)
p3
p2
plot(y_diff)
p1
p
install.packages("prophet")
View(data)
tail(data,10)
library(prophet)
library(dplyr)
library(prophet)
prophet_test <- prophet(data)
summary(data)
table(data)
data<-as.data.frame(data)
prophet_test <- prophet(data)
data.frame(data)
data<-data.frame(data)
prophet_test <- prophet(data)
length(data)
lengths(data)
colnames(data)<-c("DS", "Y")
prophet_test <- prophet(data)
colnames(data)<-c("ds", "y")
prophet_test <- prophet(data)
future <- make_future_dataframe(prophet_test, periods = 365)
forecast <- predict(prophet_test, future)
tail(forecast)
plot(data, forecast)
plot(forecast)
plot(data)
tail(1,forecast)
plot(data, forecast$yhat)
plot(forecast$yhat)
plot(data, forecast$yhat)
merge(data, forecast$yhat)
cbind(data, forecast$yhat)
p1
p
p2
plot(forecast$yhat)
View(forecast$yhat)
forecast$yhat
forecast
lengths(forecast$yhat)
length(forecast$yhat)
length(data)
lengths(data)
#special cbind function
#my.cbind(x,y,first)
# FALSE means add NA to top of shorter vector
# TRUE means add NA to bottom of shorter vector
padNA <- function (mydata, rowsneeded, first = TRUE)
{
temp1 = colnames(mydata)
rowsneeded = rowsneeded - nrow(mydata)
temp2 = setNames(
data.frame(matrix(rep(NA, length(temp1) * rowsneeded),
ncol = length(temp1))), temp1)
if (isTRUE(first)) rbind(mydata, temp2)
else rbind(temp2, mydata)
}
dotnames <- function(...) {
vnames <- as.list(substitute(list(...)))[-1L]
vnames <- unlist(lapply(vnames,deparse), FALSE, FALSE)
vnames
}
Cbind <- function(..., first = TRUE) {
Names <- dotnames(...)
datalist <- setNames(list(...), Names)
nrows <- max(sapply(datalist, function(x)
ifelse(is.null(dim(x)), length(x), nrow(x))))
datalist <- lapply(seq_along(datalist), function(x) {
z <- datalist[[x]]
if (is.null(dim(z))) {
z <- setNames(data.frame(z), Names[x])
} else {
if (is.null(colnames(z))) {
colnames(z) <- paste(Names[x], sequence(ncol(z)), sep = "_")
} else {
colnames(z) <- paste(Names[x], colnames(z), sep = "_")
}
}
padNA(z, rowsneeded = nrows, first = first)
})
do.call(cbind, datalist)
}
Cbind(data, forecast$yhat, TURE)
Cbind(data, forecast$yhat, first = TURE)
Cbind(data, forecast$yhat, first = TRUE)
result <- Cbind(data, forecast$yhat, first = TRUE)
View(result)
